<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0"><link href="/style.css" rel="stylesheet" type="text/css"><title>exact change only</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47887894-1', 'auto');
ga('send', 'pageview');
</script></head><body><div id="main-container"><main><article><header><h2><a href="blog/14-Introducing-webcrack-the-build-tool-you-never-wanted/index.html">Introducing webcrack - the build tool you never wanted</a></h2><time>March 23rd 2020</time></header><p><a href="https://github.com/adamwong246/adamwong246.github.io/tree/dev/webcrack">webcrack</a> is a thing I&#39;ve been building on the side. It was inspired by webpack, but it&#39;s very different.</p>
<p>Whereas webpack is designed to make js bundles, webcrack is designed to make files. Put very simply, webcrack watches a series of files in a source folder, and when they change, pass those to Redux store, which is then pulled apart with Reselect selectors, and the changes are written back to a destination folder. The practical upshot of this is that you can abstract difficult logic into memoized selectors, without having to deal with dependencies and the annoyance of writing to the disk! Webcrack isn&#39;t a task runner either, though it can be used as one. It has a very broad use case and can be used anytime you need to process files in a complex way, provided you have a good understanding of Redux and Reselect.</p>
<h2 id="an-example">an example</h2>
<p>In this simple example, we are watching for changes to css files, which are merged together, alongside normalize.css, and then minified.</p>
<h3 id="webcrack-config-js">webcrack.config.js</h3>
<pre><code class="lang-javascript">// you need to import reselect&#39;s createSelector function in order to perform memoized logic
createSelector = require(&#39;reselect&#39;).createSelector;

// import anything! you want to use in your selectors, provided they are *purely functional*
CleanCSS = require(&#39;clean-css&#39;);

module.exports = {
  initialState: {},

  // where to read and write the files
  options: {
    inFolder: &#39;src&#39;,
    outFolder: &#39;dist&#39;
  },

  // webcrack needs to know the encoding of tile types
  encodings: {
    &#39;utf8&#39;: [css&#39;],
  },

  // defines the inputs points where files will be read
  inputs: {
    css: &#39;assets/*.css&#39;,
  },

  // defines the output points
  // `selectors` are keyed on your inputs for easier memoization
  // must return a function of state, which returns a hash
  // where every key is a file and every value is the contents of that file
  outputs: (selectors) =&gt; {

    const styleSelector = createSelector([selectors.css], (css) =&gt; {
      return Object.keys(css).reduce((mm, k) =&gt; mm + css[k], &#39;&#39;)
    })

    const cssOutput = createSelector(styleSelector, (css) =&gt; {
      return new CleanCSS({
        keepSpecialComments: 0
      }).minify(
        [
          css,
          fs.readFileSync(&#39;./node_modules/normalize.css/normalize.css&#39;, &#39;utf8&#39;)
        ].join(&#39;\n&#39;)
      ).styles
    });

    // return a hash objects based on the state.
    //Each key is a file and each value is the contents of that file
    return createSelector([
      cssOutput,
    ], (style) =&gt; {

      return {
        &#39;style.css&#39;: style,
      }
    });
  }
}</code></pre>
<p>In this simple example, we are watching for changes to css files, which are merged together, alongside normalize.css, and then minified.</p>
<p>if you run webcrack alongside a file server, you have an instant development environment!</p>
<h2 id="an-more-complex-example">an more complex example</h2>
<p><a href="https://github.com/adamwong246/adamwong246.github.io/blob/dev/webcrack.config.js">Here</a> you can see the webcrack.config.js file which is used to build this site.</p>
<h2 id="but-why-">but WHY?</h2>
<p>Webpack is neat but sometimes you don&#39;t need a client-side SPA. Github Pages for instance does not support client-side routing because, though it does host your files, it doesn&#39;t provide redirect rules.</p>
<p>Gulp and Grunt are ok but their reliance of community-plugins is, IMHO, an liability. I almost always prefer to avoid dependencies, especially for trivial tasks.</p>
<p><a href="https://github.com/adamwong246/adamwong246.github.io/blob/dev/webcrack/index.js">Webcrack itself</a> is <em>tiny</em> and extremely hackable. It has very few of it&#39;s own dependencies.</p>
<h2 id="give-it-a-try">Give it a try</h2>
<p>I&#39;ve not yet made webcrack a formal NPM package but for now you can try it out from <a href="https://github.com/adamwong246/adamwong246.github.io/tree/dev/webcrack">here</a></p></article><hr><article><header><h2><a href="blog/13-migrating-away-from-coffeescript/index.html">migrating away from coffeescript</a></h2><time>October 27th 2016</time></header><p>Sadly, its&#39; time to let go of coffee and change with the time. I&#39;m rewriting it all for ES7, taking advantage of better async stuff. It&#39;s too bad cause I loved coffeescript&#39;s syntax so much.</p></article><hr><article><header><h2><a href="blog/12-Creating-a-multi-emulator-machine/index.html">Creating a multi-emulator machine</a></h2><time>October 24th 2016</time></header><p>Chache loves old Sega games but I grew up in a Nintendo house so I built an multi-emulator machine.</p>
<h3 id="get-some-hardware-install-lakka-and-boot-up">Get some hardware, install Lakka and boot up</h3>
<p>You&#39;ll need an old PC, laptop, or even a RassberryPi, anything you can install linux on. I&#39;m using my ancient but trusty Asus EEE PC.</p>
<p><a href="http://www.lakka.tv/get/">Lakka</a> is a linux distro which is mostly just the RetroArch frontend. You could also install LibRetro on an existing linux system through aptitude, but I wanted to do the full OS install.</p>
<p><img src="booting.jpg" alt="booting."></p>
<h3 id="troubleshoot">Troubleshoot</h3>
<p>The first real problem I had was that, by default, my pokey machine couldn&#39;t render the complex background of the menu quickly. The result was a nearly unuseable. But by turning off the option <code>Settings &gt;  Menu &gt; Menu Shader Pipeline</code> to &quot;off&quot;, navigating the menu was much faster. Next, I changed <code>Settings &gt;  Menu &gt; Show Advanced Settings</code> to &quot;On&quot;, so that I could access &quot;Settings &gt; Video &gt; Monitor Index.&quot; Changing this to &quot;2&quot; allowed me to use the VGA connection, rather than the built-in screen.</p>
<p>For the nerds, you can also do this through the command line. First obtain the IP address of the Lakka machine</p>
<pre><code>adam@babbage ~/Downloads sudo arp-scan --interface=en0 --localnet
Password:
Interface: en0, datalink type: EN10MB (Ethernet)
Starting arp-scan 1.9 with 256 hosts (http://www.nta-monitor.com/tools/arp-scan/)
192.168.1.1     00:25:9c:66:c5:8d       Cisco-Linksys, LLC
192.168.1.100   70:73:cb:e9:d1:7e       Apple, Inc.
192.168.1.113   00:26:18:41:d9:65       ASUSTek COMPUTER INC.
192.168.1.111   6c:ad:f8:7d:3c:6b       Azurewave Technologies, Inc.
...</code></pre>
<p>From this, we see the Asus netbook is online at address 192.168.1.113. Next, I used <code>ssh</code> to access the machine. Hint: the username and password are both &quot;root.&quot; Yes, this is terrible but I didn&#39;t set it up this way!</p>
<pre><code>adam@babbage ~/Downloads ssh root@192.168.1.113
root@192.168.1.113&#39;s password:
###########################################
# Lakka - The DIY retro emulation console #
# ...... visit http://www.lakka.tv ...... #
###########################################

Lakka (unofficial) Version: devel-20161002110423-r21593-g03241bf
Lakka git: 03241bf2ccf3fbf6f71d04489e02ae3cee8565e1
Lakka:~ #</code></pre>
<p>and voila, you have a very simple linux command line. From here, you must first stop RetroArch</p>
<pre><code>Lakka:~ # systemctl stop retroarch</code></pre>
<p>then you can edit <code>.config/retroarch/retroarch.cfg</code>, with <code>vi</code> or <code>nano</code>. For example, you might change the setting called <code>video_monitor_index</code> from &quot;0&quot; to &quot;2.&quot; After saving the file, restart RetroArch.</p>
<pre><code>Lakka:~ # systemctl start retroarch</code></pre>
<h3 id="connect-and-sync-controllers">Connect and sync controllers</h3>
<p><img src="controllers.jpg" alt="controllers."></p>
<p>I use Xbox wireless controllers with a charging cradle. Just plug the receiver into the usb of the netbook, press the button and the Xbox button on the controller themselves. They connected right away and I had no problems at all.</p>
<h3 id="download-roms">Download ROMs</h3>
<p><img src="mm2.jpg" alt="mm2."></p>
<p>Get all your ROMs together and use <code>scp</code> to move the files onto the netbook. Again, use <code>arp-scan</code> to first obtain the IP address of the Lakka machine.</p>
<pre><code>scp -r * root@192.168.1.113:roms/</code></pre>
<p>Now by returning the the Main Menu, you can select <code>Main Menu &gt; Load Content</code>, you run your ROMs.</p>
<h3 id="enjoy-">Enjoy!</h3>
<p>At this point, your system is basically done. I&#39;ve not been able to load any n64 or playstation games, but all the older systems, including Sega Genesis and arcade seem to work just fine. Just hit &quot;VGA&quot; on the remote and grab a controller!</p>
<h2 id="further-work">further work</h2>
<h3 id="write-playlists">Write playlists</h3>
<p>The menu is pretty difficult to navigate, so it would be nicer to have playlists of games. Lakka makes some crude attempts to generate playlists for you but it&#39;s pretty lacking. SSH into the machine and use vim to edit the file in <code>/playlists</code> <a href="https://github.com/libretro/Lakka/wiki/Playlists">as described here</a> and lists of games will appear on the root menu.</p>
<h3 id="boxart">Boxart</h3>
<p>Lakka can be configured to download the boxart for games.</p>
<h2 id="thoughts">Thoughts</h2>
<p>When I first booted Lakka, I couldn&#39;t accomplish anything because of the lag caused by the background pattern. Considering my netbook has about the stats as a RassberryPi, I think the contributors should set <code>Menu Shader Pipeline</code> to &quot;off&quot; by default.</p>
<p>It would be really nice to be able to edit the files from the Finder. You should be able to pick up the filesystem in the sidebar of your file browser. Sometimes this worked, but mostly didn&#39;t. </p></article><hr><article><header><h2><a href="blog/11-Syntax-highlight-test/index.html">Syntax highlight test</a></h2><time>August 27th 2016</time></header><pre><code class="lang-css">#button {
    border: none;
}</code></pre></article><hr><article><header><h2><a href="blog/10-Philosophy-of-Music-Design-in-Games-Fez/index.html">Philosophy of Music Design in Games - Fez</a></h2><time>August 25th 2016</time></header><div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Pl86ND_c5Og" frameborder="0" allowfullscreen></iframe>
</div></article><hr><a href="/blog/index.html">more blog entries</a></main><nav><a href="/"><h1 class="site_title">exact change only</h1></a><a href="mailto:adamwong246@gmail.com">adamwong246@gmail.com</a><hr><a href="/resume.html">resume.html</a>, <a href="/resume.pdf">.pdf</a>, <a href="/resume.md">.md</a><hr><ul><li><a href="/aboutMe/index.html">aboutMe</a></li><li><a href="/blog/index.html">blog</a></li><li><a href="/index.html">index</a></li></ul><hr><ul><li><a href="/blog/14-Introducing-webcrack-the-build-tool-you-never-wanted/index.html">Introducing webcrack - the build tool you never wanted</a><br>March 23rd 2020</li><li><a href="/blog/13-migrating-away-from-coffeescript/index.html">migrating away from coffeescript</a><br>October 27th 2016</li><li><a href="/blog/12-Creating-a-multi-emulator-machine/index.html">Creating a multi-emulator machine</a><br>October 24th 2016</li><li><a href="/blog/11-Syntax-highlight-test/index.html">Syntax highlight test</a><br>August 27th 2016</li><li><a href="/blog/10-Philosophy-of-Music-Design-in-Games-Fez/index.html">Philosophy of Music Design in Games - Fez</a><br>August 25th 2016</li></ul><a href="/blog/index.html">more blog entries...</a></nav></div><footer>Made with ❤️ and <a href="https://github.com/adamwong246/adamwong246.github.io/tree/dev/webcrack">webcrack</a><br>v0.2.4 <a href="https://github.com/adamwong246/adamwong246.github.io">github</a> <a href="/LICENSE.txt">LICENSE</a></footer></body></html>